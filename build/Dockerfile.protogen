FROM golang:1.16
WORKDIR /tmp/bunting
ADD go.mod .
ADD go.sum .
RUN go install \
    github.com/gogo/protobuf/proto \
    github.com/gogo/protobuf/protoc-gen-gogofaster \
    github.com/gogo/protobuf/gogoproto \
    github.com/golang/protobuf/protoc-gen-go

FROM ubuntu:18.04
RUN apt update
RUN apt install -y git protobuf-compiler
COPY --from=0 /go/bin/* /usr/local/bin/
WORKDIR /home/me
RUN git clone https://github.com/gogo/protobuf.git && cd protobuf && git checkout v1.3.1